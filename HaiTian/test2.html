<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN">
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>jQuery UI 对话框（Dialog） - 默认功能</title>


    <!--[if lt IE 9]>

    <script src="jquery/jquery-1.8.3.js"
            integrity="sha256-dW19+sSjW7V1Q/Z3KD1saC6NcE5TUIhLJzJbrdKzxKc="
            crossorigin="anonymous"></script>

    <![endif]-->
    <!--[if gte IE 9]><!-->

    <script src="jquery/2.1.4/jquery.min.js"></script>

    <!--<![endif]-->

                    <link rel="stylesheet" href="jquery/jquery-ui-1.12.1.custom/jquery-ui.css">
                    <script src="jquery/jquery-ui-1.12.1.custom/jquery-ui.js"></script>

    <!--[if lt IE 9]>

            <script src="jquery.jqGrid-4.4.3/js/i18n/grid.locale-cn.js"></script>
    <script src="jquery.jqGrid-4.4.3/js/jquery.jqGrid.min.js"></script>
    <link rel="stylesheet" href="jquery.jqGrid-4.4.3/css/ui.jqgrid.css" />

    <![endif]-->
    <!--[if gte IE 9]><!-->

    <script src="Guriddo_jqGrid_JS_5.2.1/src/i18n/grid.locale-cn.js"></script>
    <script src="Guriddo_jqGrid_JS_5.2.1/js/jquery.jqGrid.min.js"></script>
    <link rel="stylesheet" href="Guriddo_jqGrid_JS_5.2.1/css/ui.jqgrid.css" />

    <!--<![endif]-->


                    <script type="text/javascript">

                        $(document).ready(function () {
                            var bool=/msie/.test(navigator.userAgent.toLowerCase())
                            var a = $.browser
                            if (a !== undefined) {
                                var x = $.browser.msie
                                x=$.browser.webkit
                            }

                            var a = $.support
                            if (a !== undefined) {
                                var x = $.support
                            }

                            
                            bool = /webkit/.test(navigator.userAgent.toLowerCase());
        })
        $(function () {
            $("#upload").click(function () {
                $("#imgWait").show();
                var formData = new FormData();
                formData.append("myfile", document.getElementById("file1").files[0]);
                $.ajax({
                    url: "Test.ashx",
                    type: "POST",
                    data: formData,
                    /**
                    *必须false才会自动加上正确的Content-Type
                    */
                    contentType: false,
                    /**
                    * 必须false才会避开jQuery对 formdata 的默认处理
                    * XMLHttpRequest会对 formdata 进行正确的处理
                    */
                    processData: false,
                    success: function (data) {
                        if (data.status == "true") {
                            alert("上传成功！");
                        }
                        if (data.status == "error") {
                            alert(data.msg);
                        }
                        $("#imgWait").hide();
                    },
                    error: function () {
                        alert("上传失败！");
                        $("#imgWait").hide();
                    }
                });
            });
        })

                    </script>
                    <style>
                    </style>
</head>
<body>
    选择文件:<input type="file" id="file1" /><br />
    <input type="button" id="upload" value="上传" />

</body>
</html>